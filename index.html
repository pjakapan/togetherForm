<!doctype html>
<html class='no-js'>

<head>
  <meta charset='utf-8'>
  <title>Form.io Form Builder</title>
  <meta name='viewport' content='width=device-width'>
  <link rel='stylesheet' href='https://cdn.rawgit.com/odra/ng-json-explorer/master/dist/angular-json-explorer.min.css'>
  <link rel='stylesheet' href='https://unpkg.com/bootswatch@3.3.7/yeti/bootstrap.min.css' />
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' />
  <link rel='stylesheet' href='css/formio-full.css' />
  <link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css' />
  <link rel='stylesheet' href='css/jsoneditor.css' />
</head>

<body ng-app='formRenderer'>
  <!-- BROWSE HAPPY BEGINS HERE -->
  <style>
    #jsoneditor {
      height: 500px;
    }

    .browsehappy {
      display: block;
      width: 100%;
      height: 100px;
      background-color: #f2dede;
      margin: 0 0 10px;
      font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      font-size: 22px;
      line-height: 1.4;
      color: #333;
      padding-top: 15px;
      vertical-align: middle;
    }

    .browsehappy span {
      vertical-align: middle;
      margin: 20px 20px 20px 20px;
      background: url('https://cdn.rawgit.com/alrra/browser-logos/master/internet-explorer/internet-explorer_64x64.png') no-repeat;
      height: 64px;
      width: 64px;
      display: inline-block;
    }

    .formbuilder {
      height: 600px;
    }

    .formcomponents {
      width: 30%;
    }

    .formarea {
      width: 70%;
    }

    .component-settings .nav-link {
      font-size: 0.6em;
    }

    .jsonviewer {
      max-height: 600px;
      overflow: scroll;
    }

    .form-type-select {
      display: inline-block;
      width: 100px;
      height: 28px;
      vertical-align: top;
    }
  </style>
  <!--[if IE 6]><p class='browsehappy'><img />You are using an <strong>outdated</strong> browser. Please <a href='http://browsehappy.com/'>upgrade your browser</a> to improve your experience.</p><![endif]-->
  <!--[if IE 7]><p class='browsehappy'><img src='https://cdn.rawgit.com/alrra/browser-logos/master/internet-explorer/internet-explorer_64x64.png' />You are using an <strong>outdated</strong> browser. Please <a href='http://browsehappy.com/'>upgrade your browser</a> to improve your experience.</p><![endif]-->
  <!--[if IE 8]><p class='browsehappy'><img src='https://cdn.rawgit.com/alrra/browser-logos/master/internet-explorer/internet-explorer_64x64.png' />You are using an <strong>outdated</strong> browser. Please <a href='http://browsehappy.com/'>upgrade your browser</a> to improve your experience.</p><![endif]-->
  <!--[if IE 9]><p class='browsehappy'><img src='https://cdn.rawgit.com/alrra/browser-logos/master/internet-explorer/internet-explorer_64x64.png' />You are using an <strong>outdated</strong> browser. Please <a href='http://browsehappy.com/'>upgrade your browser</a> to improve your experience.</p><![endif]-->
  <!-- BROWSE HAPPY ENDS HERE -->
  <div class='jumbotron'>
    <div class='container text-center'>
      <h1>Together Form Renderer</h1>
    </div>
  </div>
  <div class='page-content' ng-app='formioApp'>
    <div class='container-fluid'>
      <div class='row'>
        <div class='col-sm-8 col-sm-offset-2'>
          <pre class='bg-info text-center'><h4>JSON FORM EDITOR</h4></pre>
          <div class='well jsonviewer'>
            <p>
              Load a JSON document:
              <input type="file" id="loadDocument" value="Load" />
            </p>
            <p>
              Save a JSON document:
              <input type="button" id="saveDocument" value="Save" />
            </p>

            <div id="jsoneditor"></div>
          </div>
        </div>
      </div>
      <div class='row'>

        <div class='col-sm-8 col-sm-offset-2'>
          <pre class='text-center bg-info'><h4>Renders as a Form</h4></pre>
          <div class='well' style='background-color: #fdfdfd;'>
            <formio form='form'></formio>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <script src='https://cdn.ckeditor.com/4.5.11/standard/ckeditor.js'></script>
  <script src='https://unpkg.com/signature_pad@1.5.3/signature_pad.min.js'></script>
  <script src='js/formio-full.js'></script>
  <script src='js/loadJsonForm.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js'></script>
  <script src='https://cdn.rawgit.com/odra/ng-json-explorer/master/dist/angular-json-explorer.min.js'></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://bgrins.github.io/filereader.js/filereader.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2014-11-29/FileSaver.min.js"></script>
  <script src="js/jsoneditor.js"></script>
  <script type='text/javascript'>
    angular
      .module('formRenderer', ['ui.bootstrap', 'ui.select', 'formio', 'ngJsonExplorer'])
      .run(['$rootScope', '$timeout', function ($rootScope, $timeout) {
        $rootScope.jsonCollapsed = true;
        $timeout(function () {
          $rootScope.jsonCollapsed = false;
        }, 200);
        var a = loadForm();
        console.log(a);
        $rootScope.form = {
          components: [{
            input: true,
            tableView: true,
            inputType: 'text',
            inputMask: '',
            label: 'First Name',
            key: 'firstName',
            placeholder: 'Enter your first name',
            prefix: '',
            suffix: '',
            multiple: false,
            defaultValue: '',
            protected: false,
            unique: false,
            persistent: true,
            validate: {
              required: false,
              minLength: '',
              maxLength: '',
              pattern: '',
              custom: '',
              customPrivate: false
            },
            conditional: {
              show: false,
              when: null,
              eq: ''
            },
            type: 'textfield'
          }, {
            input: true,
            tableView: true,
            inputType: 'text',
            inputMask: '',
            label: 'Last Name',
            key: 'lastName',
            placeholder: 'Enter your last name',
            prefix: '',
            suffix: '',
            multiple: false,
            defaultValue: '',
            protected: false,
            unique: false,
            persistent: true,
            validate: {
              required: false,
              minLength: '',
              maxLength: '',
              pattern: '',
              custom: '',
              customPrivate: false
            },
            conditional: {
              show: false,
              when: null,
              eq: ''
            },
            type: 'textfield'
          }, {
            type: 'select',
            validate: {
              required: false
            },
            clearOnHide: true,
            persistent: true,
            unique: false,
            protected: false,
            multiple: true,
            template: '<span>{{ item.label }}</span>',
            authenticate: false,
            filter: '',
            refreshOn: '',
            defaultValue: '',
            valueProperty: '',
            dataSrc: 'values',
            data: {
              custom: '',
              resource: '',
              url: '',
              json: '',
              values: [
                {
                  label: 'Raindrops on roses',
                  value: 'raindropsOnRoses'
                },
                {
                  label: 'Whiskers on Kittens',
                  value: 'whiskersOnKittens'
                },
                {
                  label: 'Bright copper kettles',
                  value: 'brightCopperKettles'
                },
                {
                  label: 'Warm woolen Mittens',
                  value: 'warmWoolenMittens'
                },
                [

                ]
              ]
            },
            placeholder: 'Select a few',
            key: 'favoriteThings',
            label: 'Favorite Things',
            tableView: true,
            input: true
          }, {
            input: true,
            tableView: true,
            label: 'Message',
            key: 'message',
            placeholder: 'What do you think?',
            prefix: '',
            suffix: '',
            rows: 3,
            multiple: false,
            defaultValue: '',
            protected: false,
            persistent: true,
            validate: {
              required: false,
              minLength: '',
              maxLength: '',
              pattern: '',
              custom: ''
            },
            type: 'textarea',
            conditional: {
              show: false,
              when: null,
              eq: ''
            }
          }, {
            type: 'button',
            theme: 'primary',
            disableOnInvalid: true,
            action: 'submit',
            block: false,
            rightIcon: '',
            leftIcon: '',
            size: 'md',
            key: 'submit',
            tableView: false,
            label: 'Submit',
            input: true
          }],
          display: 'form'
        };
        $rootScope.form = {
          components: [{
            input: true,
            tableView: true,
            inputType: 'text',
            inputMask: '',
            label: 'First Name',
            key: 'firstName',
            placeholder: 'Enter your first namesssssssssssssssssssss',
            prefix: '',
            suffix: '',
            multiple: false,
            defaultValue: '',
            protected: false,
            unique: false,
            persistent: true,
            validate: {
              required: false,
              minLength: '',
              maxLength: '',
              pattern: '',
              custom: '',
              customPrivate: false
            },
            conditional: {
              show: false,
              when: null,
              eq: ''
            },
            type: 'textfield'
          }, {
            input: true,
            tableView: true,
            inputType: 'text',
            inputMask: '',
            label: 'Last Name',
            key: 'lastName',
            placeholder: 'Enter your last namessssssssssssssssssss',
            prefix: '',
            suffix: '',
            multiple: false,
            defaultValue: '',
            protected: false,
            unique: false,
            persistent: true,
            validate: {
              required: false,
              minLength: '',
              maxLength: '',
              pattern: '',
              custom: '',
              customPrivate: false
            },
            conditional: {
              show: false,
              when: null,
              eq: ''
            },
            type: 'textfield'
          }, {
            type: 'select',
            validate: {
              required: false
            },
            clearOnHide: true,
            persistent: true,
            unique: false,
            protected: false,
            multiple: true,
            template: '<span>{{ item.label }}</span>',
            authenticate: false,
            filter: '',
            refreshOn: '',
            defaultValue: '',
            valueProperty: '',
            dataSrc: 'values',
            data: {
              custom: '',
              resource: '',
              url: '',
              json: '',
              values: [
                {
                  label: 'Raindrops on roses',
                  value: 'raindropsOnRoses'
                },
                {
                  label: 'Whiskers on Kittens',
                  value: 'whiskersOnKittens'
                },
                {
                  label: 'Bright copper kettles',
                  value: 'brightCopperKettles'
                },
                {
                  label: 'Warm woolen Mittens',
                  value: 'warmWoolenMittens'
                },
                [

                ]
              ]
            },
            placeholder: 'Select a few',
            key: 'favoriteThings',
            label: 'Favorite Things',
            tableView: true,
            input: true
          }, {
            input: true,
            tableView: true,
            label: 'Message',
            key: 'message',
            placeholder: 'What do you think?',
            prefix: '',
            suffix: '',
            rows: 3,
            multiple: false,
            defaultValue: '',
            protected: false,
            persistent: true,
            validate: {
              required: false,
              minLength: '',
              maxLength: '',
              pattern: '',
              custom: ''
            },
            type: 'textarea',
            conditional: {
              show: false,
              when: null,
              eq: ''
            }
          }, {
            type: 'button',
            theme: 'primary',
            disableOnInvalid: true,
            action: 'submit',
            block: false,
            rightIcon: '',
            leftIcon: '',
            size: 'md',
            key: 'submit',
            tableView: false,
            label: 'Submit',
            input: true
          }],
          display: 'form'
        };
      }]);
  </script>
  <script>
    // create the editor
    var editor = new JSONEditor(document.getElementById('jsoneditor','code'));

    // Load a JSON document
    FileReaderJS.setupInput(document.getElementById('loadDocument'), {
      readAsDefault: 'Text',
      on: {
        load: function (event, file) {
          editor.setText(event.target.result);
        }
      }
    });

    // Save a JSON document
    document.getElementById('saveDocument').onclick = function () {
      // Save Dialog
      fname = window.prompt("Save as...");

      // Check json extension in file name
      if (fname.indexOf(".") == -1) {
        fname = fname + ".json";
      } else {
        if (fname.split('.').pop().toLowerCase() == "json") {
          // Nothing to do
        } else {
          fname = fname.split('.')[0] + ".json";
        }
      }
      var blob = new Blob([editor.getText()], { type: 'application/json;charset=utf-8' });
      saveAs(blob, fname);
    };
  </script>



</body>

</html>